{"name":"travis-weigh-in","version":"1.0.2","description":"Track how each commit/pull request affects the size of a file in your repo","main":"index.js","scripts":{"test":"nosetests"},"repository":"https://github.com/danvk/travis-weigh-in","keywords":["travis","github","minification","bloat","size"],"license":"Apache-2.0","homepage":"https://github.com/danvk/travis-weigh-in#readme","gitHead":"adcc3a3e5bc16b360aa379d0fc23c3a6e1d9b21d","versions":[{"number":"1.0.0","date":"2015-10-29T14:46:17.488Z"},{"number":"1.0.1","date":"2015-10-29T14:54:36.460Z"},{"number":"1.0.2","date":"2015-10-30T16:05:45.037Z"}],"readme":" [![NPM version](http://img.shields.io/npm/v/travis-weigh-in.svg)](https://www.npmjs.org/package/travis-weigh-in)\n \n# travis-weigh-in\nTrack how each commit/pull request affects the size of a file in your repo.\n\nYou are what you measure! This script lets you track the size of a generated file (e.g. your minified JavaScript bundle) as it's changed by each Pull Request and commit in your GitHub repo. Here's what the Pull Request Statuses section looks like after you've set it up:\n\n![status with weigh-in](https://cloud.githubusercontent.com/assets/98301/10703019/161a9d40-799b-11e5-9798-8ebbab465d02.png)\n\nThe last line shows the current size of your file and how it's changed from the base of your PR (typically the `master` branch). With this Travis script, you'll catch code bloat regressions as they happen.\n\n# Setup\n\nI'll assume you have a GitHub repo with [Travis-CI][] enabled.\n\n## Generate a GitHub OAuth token\n\nFirst you'll need to create a GitHub OAuth token for the weigh-in script to post status messages on your behalf. To do this, go to GitHub settings → \"Personal Access Tokens\" → \"Generate a Token\":\n\n![generate new token](https://cloud.githubusercontent.com/assets/98301/10703144/173d430c-799c-11e5-8ac2-915482cacd17.png)\n\nBe sure to check the `repo:status` scope and give your token some descriptive name:\n\n![granting repo status on github](https://cloud.githubusercontent.com/assets/98301/10703161/369dfa2a-799c-11e5-9d94-6451fb8097ef.png)\n\nOnce your token is generated, copy it (you'll never be able to see it again!).\n\nNow go to Travis-CI and open up the Settings page for your repo. Add the token as an environment variable named `GITHUB_TOKEN`:\n\n![github_token set](https://cloud.githubusercontent.com/assets/98301/10703222/822cbe86-799c-11e5-8419-794a68339543.png)\n\nDon't forget to click the \"Add\" button!\n\n## Run the weigh-in script\n\nWith the token in place, you need to run the script from your `.travis.yml` file. You can either `npm install travis-weigh-in`, save a copy of the `weigh_in.py` script into your repo, add it as a git submodule, or just `curl` it into place. The script is intentionally written to have zero dependencies so, however you pull it in, it should Just Work.\n\nFor example, for a JavaScript project, your `.travis.yml` file might look like this:\n\n```\nlanguage: node_js\nnode_js:\n  - \"0.12\"\nscript: >\n    npm run build &&\n    npm run test &&\n    curl -O https://raw.githubusercontent.com/danvk/travis-weigh-in/master/weigh_in.py &&\n    python weigh_in.py dist/script-to-track.min.js\n```\n\nEither push this commit to your repo or send it out as a pull request. The first run will only show an absolute size (i.e. no changes), but subsequent runs should show how the commit/PR changes the size of the file.\n\nIf you don't see code sizes posted, check out the logs of your Travis-CI builds for details on what went wrong.\n\n## Setup with NPM\n\nThis script is most useful for JavaScript projects, which often use NPM to pull in dependencies. If this is convenient for you, you can set up travis-weigh-in by running:\n\n    npm install --save-dev travis-weigh-in\n    \nThen your `.travis.yml` file might look like:\n\n```\nlanguage: node_js\nnode_js:\n  - \"0.12\"\nscript: >\n    npm run build &&\n    npm run test &&\n    python node_modules/travis-weigh-in/weigh_in.py dist/script-to-track.min.js\n```\n\nNote that you still have to go through the process of setting `GITHUB_TOKEN` with this approach.\n\n# Notes\n\nIf you rename the file, the weigh-in script won't be able to track size changes through the rename. You'll get size change information for subsequent commits after the rename is merged onto `master`, though.\n\nIn a pull request, the \"push\" build pushes an absolute code size, while the \"pr\" build pushes a size with changes (e.g. \"+10 bytes\"). If the \"push\" build finishes first, you'll see the absolute size before you see the delta.\n\nThe code in the `master` branch can and will change. If you'd prefer not to trust me, you should either include a copy of the script directly in your own repo, use a submodule checked out at a specific commit or download a copy with a recent git SHA, e.g.\n\n```\ncurl -O https://raw.githubusercontent.com/danvk/travis-weigh-in/08700622d972fed7adeda13a49988e26a3e98387/weigh_in.py\n```\n\ngit SHAs are cryptographically secure, so you can be confident that the script won't break underneath you.\n\n[Travis-CI]: https://travis-ci.org/\n","created":"2015-10-29T14:46:17.488Z","modified":"2015-10-30T16:05:45.037Z","lastPublisher":{"name":"danvk","email":"danvdk@gmail.com"},"owners":[{"name":"danvk","email":"danvdk@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"travis-weigh-in","_nodeVersion":"0.12.4","_npmUser":{"name":"danvk","email":"danvdk@gmail.com"},"_npmVersion":"2.10.1","_rev":"1-08ea2fcb4f72b7a11eec140da47b6afe","_shasum":"e1b1e2161ae0f967fa6aa971e672da1d2429c80e","author":{"name":"Dan Vanderkam","url":"danvdk@gmail.com"},"bugs":{"url":"https://github.com/danvk/travis-weigh-in/issues"},"directories":{},"dist-tags":{"latest":"1.0.2"},"dist":{"shasum":"e1b1e2161ae0f967fa6aa971e672da1d2429c80e","tarball":"http://registry.npmjs.org/travis-weigh-in/-/travis-weigh-in-1.0.2.tgz"},"maintainers":[{"name":"danvk","email":"danvdk@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-10-30T16:05:45.037Z","created":"2015-10-29T14:46:17.488Z","1.0.0":"2015-10-29T14:46:17.488Z","1.0.1":"2015-10-29T14:54:36.460Z","1.0.2":"2015-10-30T16:05:45.037Z"}}}