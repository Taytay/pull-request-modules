{"name":"pull-request-conditional-merge","version":"1.1.0","description":"Merge GitHub pull request when CI passes","main":"./src/pull-request-conditional-merge.coffee","dependencies":{"coffee-script":"^1.10.0","githubot":"^1.0.0"},"devDependencies":{"ava":"^0.10.0","got":"^4.2.0","hubot-mock-adapter":"^1.0.0","hubot-test-helper":"^1.2.0","nock":"^5.2.1","node-mocks-http":"^1.5.2"},"scripts":{"pretest":"rm -rf tmp && coffee -o tmp -c test","test":"ava --require coffee-script/register --verbose tmp"},"repository":"https://github.com/soutaro/pull-request-conditional-merge","license":"MIT","keywords":["GitHub","pull request"],"homepage":"https://github.com/pull-request-conditional-merge","gitHead":"78649debd544cf22d64a5203e9b6839d998fe0e6","versions":[{"number":"1.0.0","date":"2016-03-09T15:31:01.166Z"},{"number":"1.0.1","date":"2016-03-09T15:32:36.506Z"},{"number":"1.1.0","date":"2016-03-14T00:59:41.975Z"}],"readme":"# Pull Request Conditional Merge\n\n[![Build Status](https://travis-ci.org/soutaro/pull-request-conditional-merge.svg?branch=master)](https://travis-ci.org/soutaro/pull-request-conditional-merge)\n\nThis library is to implement a bot to merge your pull request when CI passes.\n\nYou CI does not finish instantly; running tests may take tens of minutes, or many jobs may be queued already.\nThen, you may have said something like this:\n\n> Okay, I will merge this PR once CI passes.\n\nThis does not make you feel nice.\nYou have to remember PRs you have to merge it later.\nYou may forget a PR to be merged, and it may be fixing a simple typo but expected to be deployed as soon as possible.\n\nYou definitely need a bot to merge PR automatically, when CI got green.\n\n![Pull Request merged by bot](https://raw.githubusercontent.com/soutaro/pull-request-conditional-merge/master/merged-by-bot.png)\n\nThis library is to merge PR when:\n\n* The PR is labeled with `ShipIt` (you can customize the name of label)\n* All CIs associated with the PR succeeded\n\n## Getting Started\n\n### 1. Install\n\n```\n$ npm install --save pull-request-conditional-merge\n```\n\n### 2. Add new action to your web app (maybe Hubot?)\n\n```coffee\nPullRequestConditionalMerge = require(\"pull-request-conditional-merge\")\nPullRequestConditionalMergeExpress = require(\"pull-request-conditional-merge/express\")\n\nmodule.exports = (robot) ->\n  github = require('githubot')(robot)\n  robot.router.post \"/merge-pullrequest\", PullRequestConditionalMergeExpress.action(PullRequestConditionalMerge, github, robot.logger, 'your-company')\n```\n\nYou can pass additional setup function which takes `PullRequestConditonalMerge` object to `action`.\n\n```coffee\naction = PullRequestConditionalMergeExpress.action PullRequestConditionalMerge, github, robot.logger, 'your-company', pr ->\n  pr.label = 'LetBotMerge'\n```\n\n### 3. Setup a status hook on your GitHub repo\n\n`status` hook is the one you need.\n\n## Customization\n\n### Label name\n\nIf you do not like `ShipIt` label, you can use your own label name.\n\n```coffee\nPullRequestConditionalMerge.find github, owner: owner, repo: repo, sha: sha, (pr) ->\n  pr.label = \"MergeIt\"\n```\n\n### Logger\n\nYou can assign `logger` property.\n`debug` is the only level the library is using now.\n\n```coffee\nPullRequestConditionalMerge.find github, owner: owner, repo: repo, sha: sha, (pr) ->\n  pr.logger = {\n    debug: (message) -> console.log(message)\n  }\n```\n\nWith hubot:\n\n```coffee\nPullRequestConditionalMerge.find github, owner: owner, repo: repo, sha: sha, (pr) ->\n  pr.logger = robot\n```\n\n### Commit message\n\nThe default commit message is:\n\n```\nMerge pull request #3381, via bot\n```\n\nAssign a function to `commitMessage` to customize the message:\n\n```\nPullRequestConditionalMerge.find github, owner: owner, repo: repo, sha: sha, (pr) ->\n  pr.commitMessage = -> \"Merge by bot\"\n```\n\n## License\n\nThe library is available as open source under the terms of the [MIT License](http://opensource.org/licenses/MIT).\n","created":"2016-03-09T15:31:01.166Z","modified":"2016-03-14T00:59:41.975Z","lastPublisher":{"name":"soutaro","email":"matsumoto@soutaro.com"},"owners":[{"name":"soutaro","email":"matsumoto@soutaro.com"}],"other":{"_attachments":{},"_from":".","_id":"pull-request-conditional-merge","_nodeVersion":"5.4.0","_npmOperationalInternal":{"host":"packages-13-west.internal.npmjs.com","tmp":"tmp/pull-request-conditional-merge-1.1.0.tgz_1457917181433_0.7629164545796812"},"_npmUser":{"name":"soutaro","email":"matsumoto@soutaro.com"},"_npmVersion":"3.3.12","_rev":"1-4bd42ceee628d0576c5018b0b2954799","_shasum":"fdbc7347222c59d254497eb57b0aa4359f92ec41","author":{"name":"Soutaro Matsumoto"},"bugs":{"url":"https://github.com/soutaro/pull-request-conditional-merge/issues"},"directories":{},"dist-tags":{"latest":"1.1.0"},"dist":{"shasum":"fdbc7347222c59d254497eb57b0aa4359f92ec41","tarball":"http://registry.npmjs.org/pull-request-conditional-merge/-/pull-request-conditional-merge-1.1.0.tgz"},"maintainers":[{"name":"soutaro","email":"matsumoto@soutaro.com"}],"readmeFilename":"README.md","time":{"modified":"2016-03-14T00:59:41.975Z","created":"2016-03-09T15:31:01.166Z","1.0.0":"2016-03-09T15:31:01.166Z","1.0.1":"2016-03-09T15:32:36.506Z","1.1.0":"2016-03-14T00:59:41.975Z"}}}